<app-header>
    <div class="hamburger hamburger d-md-none" (click)="prodServ.toggleHamburger()">
        <span></span>
        <span></span>
        <span></span>
    </div>

    <div [class.active]="prodServ.hamburgerOpen" class="menu-items justify-content-end">
        <div class="input-group product-search-input yard-txt d-flex align-items-center gap-2">
            <input [value]="userSearch" (input)="prodServ.setSearchTerm($event.target.value)" type="text"
                class="form-control header-heights header-search-input rounded" placeholder="Search Product"
                aria-label="Input group example" aria-describedby="btnGroupAddon">
            <div routerLink="/product/checkout"
                class="cart-btn-box blue-background class-pointer header-heights d-flex align-items-center justify-content-center px-2 text-center gap-2 rounded mx-1"
                [class.wiggle]="wiggleCart()">
                <app-cart-icon></app-cart-icon>
                @if(cardServ.cart().length!==0){
                {{cardServ.cart().length}}
                }
            </div>
            <button (click)="logoutUser()" class="btn btn-light px-2 rounded">
                <app-logout-icon></app-logout-icon>
            </button>
        </div>
    </div>
</app-header>

<div class="border-top home-big-container grey-background">
    <div class="container py-4 position-relative">
        <div class="toast-wrapper position-fixed bottom-0 end-0 p-3">
            @for (toast of toasts(); track toast.id) {
            <div class="alert toast-item alert-{{toast.type}} mb-2">
                {{ toast.message }}
            </div>
            }
        </div>
        <div class="mb-3 img-containers shop-discount-container d-flex align-items-center justify-content-center">
            <div class="d-flex justify-content-center mb-3">
                <h4 class="fw-bold fs-1 m-0">Available Products</h4>
            </div>
        </div>
        @if(isLoading()){
        <div class="d-flex justify-content-center">
            <div class="spinner-border" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
        } @else {
        <div class="row g-4">
            @for(product of filtered(); track product.id){
            <div class="col-sm-6 col-md-4 col-lg-3">
                <app-product-cards role="user" [productItems]="product"></app-product-cards>
            </div>
            }
        </div>
        }
    </div>
</div>